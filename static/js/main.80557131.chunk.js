(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],[,function(e,t,n){"use strict";n.d(t,"o",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"n",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"k",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return E})),n.d(t,"j",(function(){return b})),n.d(t,"p",(function(){return v})),n.d(t,"r",(function(){return h})),n.d(t,"s",(function(){return N})),n.d(t,"q",(function(){return O}));var r="SET_INGREDIENTS",a="FETCH_INGREDIENTS_FAILED",c="ADD_INGREDIENT",o="REMOVE_INGREDIENT",i="CHECKOUT_BURGER",l="PURCHASE_BURGER_START",u="PURCHASE_BURGER_SUCCESS",s="PURCHASE_BURGER_FAIL",d="FETCH_ORDERS_START",m="FETCH_ORDER_SUCCESS",f="FETCH_ORDER_FAIL",g="LOGIN_START",p="LOGIN_STORE",E="LOGIN_FAIL",b="LOGOUT",v="SIGNUP_CLEAR",h="SIGNUP_START",N="SIGNUP_SUCCESS",O="SIGNUP_FAIL"},,,,,,,,,,function(e,t,n){"use strict";var r=n(18),a=n.n(r).a.create({baseURL:"https://react-burger-builder-12ae6.firebaseio.com"});t.a=a},,,function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"i",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return E})),n.d(t,"b",(function(){return b})),n.d(t,"j",(function(){return N})),n.d(t,"k",(function(){return h}));var r=n(1),a=n(11),c=function(e){return{type:r.a,ingredient:e}},o=function(e){return{type:r.n,ingredient:e}},i=function(){return function(e){return a.a.get("/ingredients.json").then((function(t){var n;e((n=t.data,{type:r.o,ingredients:n}))})).catch((function(t){e({type:r.c})}))}},l=function(){return{type:r.b}},u=function(e,t){return function(n){n({type:r.l}),a.a.post("/orders.json?auth="+t,e).then((function(e){n({type:r.m})})).catch((function(e){n(function(e){return{type:r.k,error:e}}(e))}))}},s=n(7),d=function(e,t){return function(n){n({type:r.e});var c="?auth=".concat(e,'&orderBy="userId"&equalTo="').concat(t,'"');a.a.get("/orders.json".concat(c)).then((function(e){var t,a=[];for(var c in e.data)a.unshift(Object(s.a)(Object(s.a)({},e.data[c]),{},{id:c}));n((t=a,{type:r.f,orders:t}))})).catch((function(e){var t;n((t=e,{type:r.d,error:t}))}))}},m=n(18),f=n.n(m),g=function(e){return{type:r.i,authData:e}},p=function(e){return function(t){setTimeout((function(){t(E())}),900*e)}},E=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:r.j}},b=function(){return function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)e(E());else{var r=localStorage.getItem("userId"),a=(n.getTime()-(new Date).getTime())/1e3;e(g({idToken:t,localId:r})),e(p(a))}}else e(E())}},v=function(e){return function(t){t({type:r.h});var n="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");f.a.post(n,Object(s.a)(Object(s.a)({},e),{},{returnSecureToken:!0})).then((function(e){var n=new Date((new Date).getTime()+new Date(1e3*e.data.expiresIn).getTime());localStorage.setItem("token",e.data.idToken),localStorage.setItem("expirationDate",n),localStorage.setItem("userId",e.data.localId),t(p(e.data.expiresIn)),t(g(e.data))})).catch((function(e){t(function(e){return{type:r.g,error:e}}(e.response.data.error))}))}},h=function(){return{type:r.p}},N=function(e){var t="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");return function(n){n(h()),n({type:r.r}),f.a.post(t,Object(s.a)(Object(s.a)({},e),{},{returnSecureToken:!0})).then((function(e){n({type:r.s})})).catch((function(e){n(function(e){return{type:r.q,error:e.response.data.error}}(e))}))}}},function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(88);t.a=function(){return a.a.createElement("div",{className:"spinner"},a.a.createElement("div",null),a.a.createElement("div",null))}},,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(64);t.a=function(e){var t=e.clicked;return a.a.createElement("div",{className:"backdrop",onClick:t})}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=(n(87),n(24));t.a=function(e){var t=e.closeAlert;return console.log(e),a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{clicked:t}),a.a.createElement("div",{className:"alert"},e.children))}},function(e,t,n){},,,,,,function(e,t,n){"use strict";var r=n(12),a=n(0),c=n.n(a),o=n(25);t.a=function(e,t){return function(n){var i=function(e){var t=Object(a.useState)(null),n=Object(r.a)(t,2),c=n[0],o=n[1],i=e.interceptors.request.use((function(e){return o(null),e})),l=e.interceptors.response.use((function(e){return e}),(function(e){o(e)}));Object(a.useEffect)((function(){return function(){e.interceptors.request.eject(i),e.interceptors.response.eject(l)}}),[i,l]);return[c,function(){o(null)}]}(t),l=Object(r.a)(i,2),u=l[0],s=l[1];return c.a.createElement(c.a.Fragment,null,u?c.a.createElement(o.a,{show:null!==u,closeModal:s},u.message):null,c.a.createElement(e,n))}}},,,,,,,,,,,function(e,t,n){"use strict";var r=n(42),a=n(0),c=n.n(a),o=(n(65),n(66),n(67),function(e){var t=null;switch(e.type){case"bread-bottom":t=c.a.createElement("div",{className:"bread-bottom"});break;case"bread-top":t=c.a.createElement("div",{className:"bread-top"},c.a.createElement("div",{className:"seeds1"}),c.a.createElement("div",{className:"seeds2"}));break;case"meat":t=c.a.createElement("div",{className:"meat"});break;case"cheese":t=c.a.createElement("div",{className:"cheese"});break;case"bacon":t=c.a.createElement("div",{className:"bacon"});break;case"salad":t=c.a.createElement("div",{className:"salad"});break;default:t=null}return t});t.a=function(e){var t=Object.keys(e.ingredients).map((function(t){return Object(r.a)(Array(e.ingredients[t])).map((function(e,n){return c.a.createElement(o,{key:t+n,type:t})}))})).reduce((function(e,t){return e.concat(t)}),[]);return 0===t.length&&(t=c.a.createElement("p",{className:"burger__instruction"},"FEEL FREE TO ADD INGREDIENTS")),c.a.createElement("div",{className:"burger scrollbar"},c.a.createElement(o,{type:"bread-top"}),t,c.a.createElement(o,{type:"bread-bottom"}))}},,,,function(e,t,n){e.exports=n(90)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),o=n.n(c),i=(n(52),n(12)),l=(n(53),n(54),n(55),function(e){return a.a.createElement("div",{className:"logo"})}),u=(n(56),n(57),n(13)),s=n(4),d=function(e){var t=e.closeSideDrawer,n=null!==Object(s.d)((function(e){return e.login.token}));return a.a.createElement("ul",{className:"navigation-items",onClick:t},a.a.createElement("li",{className:"navigation-item"},a.a.createElement(u.c,{to:"/",exact:!0,className:"link--nav",activeClassName:"active"},"Burger Builder")),n?a.a.createElement("li",{className:"navigation-item"},a.a.createElement(u.c,{to:"/profile",exact:!0,className:"link--nav",activeClassName:"active"},"Profile")):null,n?a.a.createElement("li",{className:"navigation-item"},a.a.createElement(u.c,{to:"/orders",exact:!0,className:"link--nav",activeClassName:"active"},"Orders")):null,a.a.createElement("li",{className:"navigation-item"},a.a.createElement(u.c,{to:n?"/logout":"/login",exact:!0,className:"link--nav",activeClassName:"active"},n?"Logout":"Login")))},m=(n(62),function(e){var t=e.toggleSideDrawer;return a.a.createElement("div",{onClick:t,className:"drawertoggle"},a.a.createElement("div",{className:"drawertoggle__bar"}),a.a.createElement("div",{className:"drawertoggle__bar"}),a.a.createElement("div",{className:"drawertoggle__bar"}))}),f=function(e){var t=e.toggleSideDrawer;return a.a.createElement("div",{className:"toolbar"},a.a.createElement(m,{toggleSideDrawer:t}),a.a.createElement(l,null),a.a.createElement("nav",{className:"toolbar__nav"},a.a.createElement(d,null)))},g=(n(63),n(24)),p=function(e){var t=e.sideDrawerOpen,n=e.closeSideDrawer,r=e.isAuthenticated;return a.a.createElement(a.a.Fragment,null,t?a.a.createElement(g.a,{clicked:n}):null,a.a.createElement("div",{className:t?"sidedrawer--open":"sidedrawer--close"},a.a.createElement("nav",null,a.a.createElement(d,{side:!0,isAuthenticated:r,closeSideDrawer:n}))))},E=function(e){var t=e.children,n=Object(s.d)((function(e){return null!==e.login.token})),c=Object(r.useState)(!1),o=Object(i.a)(c,2),l=o[0],u=o[1];return a.a.createElement("div",{className:"app"},a.a.createElement(f,{toggleSideDrawer:function(){u(!l)},isAuthenticated:n}),a.a.createElement(p,{isAuthenticated:n,sideDrawerOpen:l,closeSideDrawer:function(){u(!1)}}),a.a.createElement("main",{className:"main"},t))},b=n(7),v=n(43),h=n(11),N=(n(26),n(85),n(86),function(e){var t=e.label,n=e.removeIngredient,r=e.disabled,c=e.addIngredient;return a.a.createElement("div",{className:"build-control"},a.a.createElement("div",{className:"build-control__label"},t),a.a.createElement("button",{className:"button--less build-control__button",onClick:n,disabled:r},"Less"),a.a.createElement("button",{className:"button--more build-control__button",onClick:c},"More"))}),O=[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],S=function(e){var t=e.startOrder,n=e.disabled,r=e.price,c=e.addIngredient,o=e.removeIngredient,i=Object(b.a)({},n),l=!Object.keys(i).map((function(e){return!i[e]})).reduce((function(e,t){return e||t}),!1);return a.a.createElement("div",{className:"build-controls"},a.a.createElement("p",{className:"build-controls__price"},"Current price: ",a.a.createElement("span",null,"$",r.toFixed(2))),O.map((function(e){return a.a.createElement(N,{key:e.label,label:e.label,addIngredient:function(){return c(e.type)},removeIngredient:function(){return o(e.type)},disabled:n[e.type]})})),a.a.createElement("button",{className:"button--success build-controls__order",disabled:l,onClick:t},"Order now!"))},y=n(25),k=n(15),I=(n(89),function(e){var t=e.cancelOrder,n=e.goToLogin;return a.a.createElement("div",{className:"login-prompt"},a.a.createElement("p",{className:"login-prompt__toolkit"},"Please login to continue"),a.a.createElement("button",{type:"button",className:"button--failed login-prompt__button",onClick:t},"Cancel"),a.a.createElement("button",{type:"button",className:"button--success login-prompt__button",onClick:n},"Login"))}),j=n(32),_=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2);return[t[0],t[1]]},w=n(14),D=Object(j.a)((function(e){var t=Object(s.c)(),n=_(),c=Object(i.a)(n,2),o=c[0],l=c[1],u=Object(s.d)((function(e){return e.buildBurger.ingredients})),d=Object(s.d)((function(e){return e.buildBurger.totalPrice})),m=Object(s.d)((function(e){return e.buildBurger.error})),f=Object(s.d)((function(e){return null!==e.login.token}));Object(r.useEffect)((function(){t(w.e())}),[]);var g=function(){return l(!1)},p=Object(b.a)({},u);for(var E in p)p[E]=p[E]<=0;var h=m?a.a.createElement("p",null,"Ingredients can't be loaded :("):a.a.createElement(k.a,null);return u&&(h=a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{ingredients:u}),a.a.createElement(S,{addIngredient:function(e){return t(w.a(e))},removeIngredient:function(e){return t(w.i(e))},disabled:p,price:d,startOrder:function(){f?e.history.replace("/checkout"):l(!0)}}))),a.a.createElement(a.a.Fragment,null,o?a.a.createElement(y.a,{closeAlert:g},a.a.createElement(I,{cancelOrder:g,goToLogin:function(){e.history.replace("/login"),l(!1)}})):null,h)}),h.a),T=n(3),C=function(e){var t=Object(s.c)();return Object(r.useEffect)((function(){t(w.g())}),[]),a.a.createElement(T.a,{to:"/"})},R=a.a.lazy((function(){return n.e(4).then(n.bind(null,154))})),A=a.a.lazy((function(){return n.e(7).then(n.bind(null,155))})),F=a.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,151))})),B=a.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,152))})),L=a.a.lazy((function(){return n.e(8).then(n.bind(null,153))})),U=function(e){var t=Object(s.c)(),n=Object(s.d)((function(e){return e.login.token})),c=Object(s.d)((function(e){return e.login.userId}));Object(r.useEffect)((function(){if(console.log(c),c){var e="?auth=".concat(n,'&orderBy="userId"&equalTo="').concat(c,'"');h.a.get("/users.json".concat(e)).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}),[c,n]),t(w.b(n));var o=null!==n;return a.a.createElement(E,null,a.a.createElement(T.d,null,function(e){return e?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(T.b,{path:"/checkout",component:R})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(T.b,{path:"/orders",component:A})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(T.b,{path:"/profile",component:L})),a.a.createElement(T.b,{path:"/logout",component:C}),a.a.createElement(T.b,{path:"/",exact:!0,component:D}),a.a.createElement(T.a,{to:"/"})):a.a.createElement(a.a.Fragment,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(T.b,{path:"/login",component:F})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(T.b,{path:"/signup",component:B})),a.a.createElement(T.b,{path:"/",exact:!0,component:D}),a.a.createElement(T.a,{to:"/"}))}(o)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(16),P=n(1),x={ingredients:null,totalPrice:4,error:!1},J={salad:.5,cheese:.4,meat:1.3,bacon:.7};function z(e){return JSON.parse(JSON.stringify(e))}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.o:var n=z(e);return n.ingredients?(n.error=!1,n):(n.ingredients={salad:t.ingredients.salad,bacon:t.ingredients.bacon,cheese:t.ingredients.cheese,meat:t.ingredients.meat},n.error=!1,n.purchasing=!1,n);case P.c:var r=z(e);return r.error=!0,r;case P.a:var a=z(e);return a.ingredients[t.ingredient]++,a.totalPrice+=J[t.ingredient],a;case P.n:var c=z(e);return c.ingredients[t.ingredient]--,c.totalPrice-=J[t.ingredient],c;default:return e}},q={loading:!1,purchased:!1};function M(e){return JSON.parse(JSON.stringify(e))}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.b:var n=M(e);return n.purchased=!1,n;case P.m:var r=M(e);return r.loading=!1,r.purchased=!0,r;case P.k:var a=M(e);return a.loading=!1,a;case P.l:var c=M(e);return c.loading=!0,c;default:return e}},Y={orders:[],fetching:!0};function W(e){return JSON.parse(JSON.stringify(e))}var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.e:var n=W(e);return n.fetching=!0,n;case P.f:var r=W(e);return r.orders=t.orders,r.fetching=!0,r;case P.d:var a=W(e);return a.fetching=!0,a;default:return e}},X={token:null,userId:null,error:null,loading:!1};function Z(e){return JSON.parse(JSON.stringify(e))}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.h:var n=Z(e);return n.loading=!0,n.error=null,n;case P.i:var r=Z(e);return r.token=t.authData.idToken,r.userId=t.authData.localId,r.error=null,r.loading=!1,r;case P.g:var a=Z(e);return a.error=t.error,a.loading=!1,a;case P.j:var c=Z(e);return c.token=null,c.userId=null,c;default:return e}},V={error:null,loading:!1,isSignupComplete:!1};function ee(e){return JSON.parse(JSON.stringify(e))}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.r:var n=ee(e);return n.loading=!0,n.error=null,n;case P.s:var r=ee(e);return r.isSignupComplete=!0,r.error=null,r.loading=!1,r;case P.q:var a=ee(e);return a.error=t.error,a.loading=!1,a;case P.p:var c=ee(e);return c.isSignupComplete=!1,c;default:return e}},ne=n(45),re=G.d,ae=Object(G.c)({buildBurger:H,placeOrder:K,fetchOrders:Q,login:$,signup:te}),ce=Object(G.e)(ae,re(Object(G.a)(ne.a))),oe=a.a.createElement(s.a,{store:ce},a.a.createElement(u.a,{basename:"/burgerbuilder"},a.a.createElement(U,null)));o.a.render(a.a.createElement(a.a.Fragment,null,oe),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[47,2,3]]]);
//# sourceMappingURL=main.80557131.chunk.js.map