(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],[,function(e,t,n){"use strict";n.d(t,"v",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"u",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"s",(function(){return l})),n.d(t,"t",(function(){return u})),n.d(t,"r",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"q",(function(){return p})),n.d(t,"m",(function(){return b})),n.d(t,"g",(function(){return E})),n.d(t,"j",(function(){return h})),n.d(t,"y",(function(){return y})),n.d(t,"x",(function(){return O})),n.d(t,"w",(function(){return N})),n.d(t,"l",(function(){return S})),n.d(t,"p",(function(){return I})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return T})),n.d(t,"k",(function(){return _}));var a="SET_INGREDIENTS",r="FETCH_INGREDIENTS_FAILED",c="ADD_INGREDIENT",o="REMOVE_INGREDIENT",i="CHECKOUT_BURGER",l="PURCHASE_BURGER_START",u="PURCHASE_BURGER_SUCCESS",s="PURCHASE_BURGER_FAIL",d="FETCH_ORDERS_START",m="FETCH_ORDER_SUCCESS",f="FETCH_ORDER_FAIL",g="LOGIN_START",v="LOGIN_STORE",p="PROFILE_STORE",b="PROFILE_FAIL",E="LOGIN_FAIL",h="LOGOUT",y="SIGNUP_START",O="SIGNUP_END",N="SIGNUP_CONFLICT",S="PROFILE_EDIT",I="PROFILE_START_SAVE",k="PROFILE_STARTEND",T="PROFILE_SAVE_FAILED",_="PROFILE_EDIT_END"},,,,,,,,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(87);t.a=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",null),r.a.createElement("div",null))}},function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"k",(function(){return I})),n.d(t,"j",(function(){return O})),n.d(t,"b",(function(){return S}));var a,r=n(1),c=n(6),o=n.n(c),i=function(e){return{type:r.a,ingredient:e}},l=function(e){return{type:r.u,ingredient:e}},u=function(){return function(e){return o.a.get("https://react-burger-builder-12ae6.firebaseio.com/ingredients.json").then((function(t){var n;e((n=t.data,{type:r.v,ingredients:n}))}),(function(t){var n;e((n="Can't initialize burger builder app :(",{type:r.c,errorMessage:n}))})).catch((function(e){alert(e)}))}},s=n(4),d=function(e,t){return function(n){n({type:r.e});var a="?auth=".concat(e,'&orderBy="userId"&equalTo="').concat(t,'"');o.a.get("https://react-burger-builder-12ae6.firebaseio.com/orders.json".concat(a)).then((function(e){var t,a=[];for(var c in e.data)a.unshift(Object(s.a)(Object(s.a)({},e.data[c]),{},{id:c}));n((t=a,{type:r.f,orders:t}))})).catch((function(e){var t;n((t=e,{type:r.d,error:t}))}))}},m=function(e,t){return{type:r.i,idToken:e,userId:t}},f=function(e){return function(t){a=setTimeout((function(){t(p())}),1e3*e)}},g=function(e){return{type:r.q,userData:e}},v=function(e){return{type:r.m,errorMessage:e}},p=function(){return clearTimeout(a),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userData"),{type:r.j}},b=function(e){return function(t){if(e){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)t(p());else{var a=localStorage.getItem("userId"),r=JSON.parse(localStorage.getItem("userData")),c=(n.getTime()-(new Date).getTime())/1e3;t(g(r)),t(m(e,a)),t(f(c))}}}},E=function(e,t){var n=null,a=null,c=null;return function(i){i({type:r.h});var l="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");o.a.post(l,Object(s.a)(Object(s.a)({},e),{},{returnSecureToken:!0})).then((function(e){n=e.data.localId,a=e.data.idToken,c=e.data.expiresIn,function(e,t){var n="?auth=".concat(e,'&orderBy="userId"&equalTo="').concat(t,'"'),a="https://react-burger-builder-12ae6.firebaseio.com/users.json".concat(n);return o.a.get(a)}(a,n).then((function(e){var t=new Date((new Date).getTime()+new Date(1e3*c).getTime());localStorage.setItem("token",a),localStorage.setItem("expirationDate",t),localStorage.setItem("userId",n);var r={};for(var o in e.data)Object.assign(r,Object(s.a)(Object(s.a)({},e.data[o]),{},{id:o}));localStorage.setItem("userData",JSON.stringify(r)),i(m(a,n)),i(f(c)),i(g(r))}),(function(){i(v("Failed to login due to some errors :(")),t(!0)}))}),(function(e){var t=e.response.data.error.message;i(function(e){return{type:r.g,conflictMessage:e}}(t))})).catch((function(){i(v("Network Error! Failed to login :(")),t(!0)}))}},h=function(e){return{type:r.x,endType:e}},y=function(e,t){var n=e.email,a=e.password,c=e.name,i=e.country,l=e.zipCode,u=e.contactNumber,d=null,m={email:n,password:a},f={name:c,country:i,zipCode:l,contactNumber:u};return function(e){e({type:r.y}),function(e){var t="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");return o.a.post(t,Object(s.a)(Object(s.a)({},e),{},{returnSecureToken:!0}))}(m).then((function(n){console.log(n);var a=n.data.idToken,r=n.data.localId;d=a,function(e,t){var n="?auth=".concat(t);return o.a.post("https://react-burger-builder-12ae6.firebaseio.com/users.json".concat(n),e)}(Object(s.a)(Object(s.a)({},f),{},{userId:r}),a).then((function(){e(h("userSaved")),t(!0)}),(function(n){console.log(n.response.data.error),function(e){var t="https://identitytoolkit.googleapis.com/v1/accounts:delete?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");return o.a.post(t,{idToken:e})}(d).then((function(){e(h("signupFailed")),t(!0)}),(function(){e(h("userNotSaved")),t(!0)}))}))}),(function(t){var n=t.response.data.error.message;e(function(e){return{type:r.w,conflictMessage:e}}(n))})).catch((function(){e(h("signupFailed")),t(!0)}))}},O=function(){return{type:r.l}},N=function(e){return{type:r.o,errorMessage:e}},S=function(){return{type:r.k}},I=function(e,t,n,a,c,i){var l={method:"post",headers:{"X-HTTP-Method-Override":"PATCH"},params:{auth:a}},u="https://react-burger-builder-12ae6.firebaseio.com/users/".concat(t,".json");return function(a){a({type:r.p}),o.a.post(u,e,l).then((function(e){var c=Object(s.a)(Object(s.a)({},e.data),{},{userId:n,id:t});console.log(c),localStorage.setItem("userData",JSON.stringify(c)),a(g(e.data)),a({type:r.n}),i.replace("/profile")}),(function(){a(N("Failed to save changes")),c(!0)})).catch((function(){a(N("Failed to save changes")),c(!0)}))}}},,,,,,,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(80);t.a=function(e){var t=e.clicked;return r.a.createElement("div",{className:"backdrop",onClick:t})}},function(e,t,n){},,,,,function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=(n(86),n(23));t.a=function(e){var t=e.closeAlert;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{clicked:t}),r.a.createElement("div",{className:"alert"},e.children))}},function(e,t,n){"use strict";var a=n(16),r=n(0);t.a=function(e){var t=Object(r.useState)(e),n=Object(a.a)(t,2);return[n[0],n[1]]}},,,,,,,,,,,function(e,t,n){"use strict";var a=n(44),r=n(0),c=n.n(r),o=(n(81),n(82),n(83),function(e){var t=null;switch(e.type){case"bread-bottom":t=c.a.createElement("div",{className:"bread-bottom"});break;case"bread-top":t=c.a.createElement("div",{className:"bread-top"},c.a.createElement("div",{className:"seeds1"}),c.a.createElement("div",{className:"seeds2"}));break;case"meat":t=c.a.createElement("div",{className:"meat"});break;case"cheese":t=c.a.createElement("div",{className:"cheese"});break;case"bacon":t=c.a.createElement("div",{className:"bacon"});break;case"salad":t=c.a.createElement("div",{className:"salad"});break;default:t=null}return t});t.a=function(e){var t=Object.keys(e.ingredients).map((function(t){return Object(a.a)(Array(e.ingredients[t])).map((function(e,n){return c.a.createElement(o,{key:t+n,type:t})}))})).reduce((function(e,t){return e.concat(t)}),[]);return 0===t.length&&(t=c.a.createElement("p",{className:"burger__instruction"},"FEEL FREE TO ADD INGREDIENTS")),c.a.createElement("div",{className:"burger scrollbar"},c.a.createElement(o,{type:"bread-top"}),t,c.a.createElement(o,{type:"bread-bottom"}))}},,,,,function(e,t,n){e.exports=n(89)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),o=n.n(c),i=(n(51),n(16)),l=(n(52),n(53),n(54),function(e){return r.a.createElement("div",{className:"logo"})}),u=(n(55),n(56),n(3)),s=n(14),d=n(13),m=n(5),f=function(e){var t=e.closeSideDrawer,n=Object(m.b)(),a=Object(u.g)(),c=null!==Object(m.c)((function(e){return e.login.idToken}));return r.a.createElement("ul",{className:"navigation-items",onClick:t},r.a.createElement("li",{className:"navigation-item"},r.a.createElement(s.c,{to:"/",exact:!0,className:"link--nav",activeClassName:"active"},"Burger Builder")),c?r.a.createElement("li",{className:"navigation-item"},r.a.createElement(s.c,{to:"/profile",exact:!0,className:"link--nav",activeClassName:"active"},"Profile")):null,c?r.a.createElement("li",{className:"navigation-item"},r.a.createElement(s.c,{to:"/orders",exact:!0,className:"link--nav",activeClassName:"active"},"Orders")):null,c?null:r.a.createElement("li",{className:"navigation-item"},r.a.createElement(s.c,{to:"/login",exact:!0,className:"link--nav",activeClassName:"active"},"Login")),c?r.a.createElement("li",{className:"navigation-item"},r.a.createElement("a",{href:"/",className:"link--nav",onClick:function(e){e.preventDefault(),n(d.f()),a.replace("/")}},"Logout")):null)},g=(n(78),function(e){var t=e.toggleSideDrawer;return r.a.createElement("div",{onClick:t,className:"drawertoggle"},r.a.createElement("div",{className:"drawertoggle__bar"}),r.a.createElement("div",{className:"drawertoggle__bar"}),r.a.createElement("div",{className:"drawertoggle__bar"}))}),v=function(e){var t=e.toggleSideDrawer;return r.a.createElement("div",{className:"toolbar"},r.a.createElement(g,{toggleSideDrawer:t}),r.a.createElement(l,null),r.a.createElement("nav",{className:"toolbar__nav"},r.a.createElement(f,null)))},p=(n(79),n(23)),b=function(e){var t=e.sideDrawerOpen,n=e.closeSideDrawer,a=e.isAuthenticated;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(p.a,{clicked:n}):null,r.a.createElement("div",{className:t?"sidedrawer--open":"sidedrawer--close"},r.a.createElement("nav",null,r.a.createElement(f,{side:!0,isAuthenticated:a,closeSideDrawer:n}))))},E=function(e){var t=e.children,n=Object(m.c)((function(e){return null!==e.login.idToken})),c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],u=o[1];return r.a.createElement("div",{className:"app"},r.a.createElement(v,{toggleSideDrawer:function(){u(!l)},isAuthenticated:n}),r.a.createElement(b,{isAuthenticated:n,sideDrawerOpen:l,closeSideDrawer:function(){u(!1)}}),r.a.createElement("main",{className:"main"},t))},h=n(4),y=n(41),O=(n(24),n(84),n(85),function(e){var t=e.label,n=e.removeIngredient,a=e.disabled,c=e.addIngredient;return r.a.createElement("div",{className:"build-control"},r.a.createElement("div",{className:"build-control__label"},t),r.a.createElement("button",{className:"button--less build-control__button",onClick:n,disabled:a},"Less"),r.a.createElement("button",{className:"button--more build-control__button",onClick:c},"More"))}),N=[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],S=function(e){var t=e.startOrder,n=e.disabled,a=e.price,c=e.addIngredient,o=e.removeIngredient,i=Object(h.a)({},n),l=!Object.keys(i).map((function(e){return!i[e]})).reduce((function(e,t){return e||t}),!1);return r.a.createElement("div",{className:"build-controls"},r.a.createElement("p",{className:"build-controls__price"},"Current price: ",r.a.createElement("span",null,"$",a)),N.map((function(e){return r.a.createElement(O,{key:e.label,label:e.label,addIngredient:function(){return c(e.type)},removeIngredient:function(){return o(e.type)},disabled:n[e.type]})})),r.a.createElement("button",{className:"button--success build-controls__order",disabled:l,onClick:t},"Order now!"))},I=n(29),k=n(12),T=(n(88),function(e){var t=e.cancelOrder,n=e.goToLogin;return r.a.createElement("div",{className:"order-prompt"},r.a.createElement("p",{className:"order-prompt__toolkit"},"Please login to continue"),r.a.createElement("button",{type:"button",className:"button--failed order-prompt__button",onClick:t},"Cancel"),r.a.createElement("button",{type:"button",className:"button--success order-prompt__button",onClick:n},"Login"))}),_=n(30),j=function(e){var t=Object(m.b)(),n=Object(_.a)(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],u=Object(m.c)((function(e){return e.buildBurger.ingredients})),s=Object(m.c)((function(e){return e.buildBurger.totalPrice.toFixed(2)})),f=Object(m.c)((function(e){return e.buildBurger.errorMessage})),g=Object(m.c)((function(e){return null!==e.login.idToken}));Object(a.useEffect)((function(){u||t(d.d())}),[]);var v=function(){return l(!1)},p=Object(h.a)({},u);for(var b in p)p[b]=p[b]<=0;return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(I.a,{closeAlert:v},r.a.createElement(T,{cancelOrder:v,goToLogin:function(){e.history.push("/login"),l(!1)}})):null,u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{ingredients:u}),r.a.createElement(S,{addIngredient:function(e){return t(d.a(e))},removeIngredient:function(e){return t(d.h(e))},disabled:p,price:s,startOrder:function(){return g&&e.history.push("/checkout")||l(!0)}}))||f&&r.a.createElement("p",{style:{color:"lightgrey"}},f)||r.a.createElement(k.a,null))},D=r.a.lazy((function(){return n.e(8).then(n.bind(null,152))})),w=r.a.lazy((function(){return n.e(9).then(n.bind(null,156))})),R=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,153))})),F=r.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,157))})),C=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,154))})),A=r.a.lazy((function(){return n.e(7).then(n.bind(null,155))})),L=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.login.idToken})),c=localStorage.getItem("token");Object(a.useEffect)((function(){t(d.g(c))}),[]);var o=null!==n;return r.a.createElement(E,null,r.a.createElement(u.d,null,function(e){return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(k.a,null)},r.a.createElement(u.b,{path:"/checkout",component:D})),r.a.createElement(a.Suspense,{fallback:r.a.createElement(k.a,null)},r.a.createElement(u.b,{path:"/orders",component:w})),r.a.createElement(a.Suspense,{fallback:r.a.createElement(k.a,null)},r.a.createElement(u.b,{path:"/profile-edit",component:C})),r.a.createElement(a.Suspense,{fallback:r.a.createElement(k.a,null)},r.a.createElement(u.b,{path:"/profile",component:A})),r.a.createElement(u.b,{path:"/",exact:!0,component:j}),r.a.createElement(u.a,{to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(k.a,null)},r.a.createElement(u.b,{path:"/login",component:R})),r.a.createElement(a.Suspense,{fallback:r.a.createElement(k.a,null)},r.a.createElement(u.b,{path:"/signup",component:F})),r.a.createElement(u.b,{path:"/",exact:!0,component:j}),r.a.createElement(u.a,{to:"/"}))}(o)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(15),P=n(1),B={ingredients:null,totalPrice:4,errorMessage:null},J={salad:.5,cheese:.4,meat:1.3,bacon:.7};function G(e){return JSON.parse(JSON.stringify(e))}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.v:var n=G(e);return n.ingredients?(n.error=!1,n):(n.ingredients={salad:t.ingredients.salad,bacon:t.ingredients.bacon,cheese:t.ingredients.cheese,meat:t.ingredients.meat},n.error=!1,n.purchasing=!1,n);case P.c:var a=G(e);return a.errorMessage=t.errorMessage,a;case P.a:var r=G(e);return r.ingredients[t.ingredient]++,r.totalPrice+=J[t.ingredient],r;case P.u:var c=G(e);return c.ingredients[t.ingredient]--,c.totalPrice-=J[t.ingredient],c;default:return e}},z={loading:!1,purchased:!1};function U(e){return JSON.parse(JSON.stringify(e))}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.b:var n=U(z);return n;case P.t:var a=U(e);return a.loading=!1,a.purchased=!0,a;case P.r:var r=U(e);return r.loading=!1,r;case P.s:var c=U(e);return c.loading=!0,c;default:return e}},K={orders:[],fetching:!0};function Y(e){return JSON.parse(JSON.stringify(e))}var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.e:var n=Y(K);return n.fetching=!0,n;case P.f:var a=Y(e);return a.orders=t.orders,a.fetching=!0,a;case P.d:var r=Y(e);return r.fetching=!0,r;default:return e}},X={idToken:null,userId:null,userData:{},conflictMessage:null,errorMessage:null,loading:!1};function Q(e){return JSON.parse(JSON.stringify(e))}var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.h:var n=Q(X);return n.loading=!0,n;case P.i:var a=Q(e);return a.idToken=t.idToken,a.userId=t.userId,a;case P.q:var r=Q(e);return r.userData=t.userData,r.loading=!1,r;case P.m:var c=Q(e);return c.errorMessage=t.errorMessage,c.loading=!1,c;case P.g:var o=Q(e);return o.conflictMessage=t.conflictMessage,o.loading=!1,o;case P.j:var i=Q(e);return i.idToken=null,i.userId=null,i;default:return e}},W={conflictMessage:null,loading:!1,endType:null};function Z(e){return JSON.parse(JSON.stringify(e))}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.y:var n=Z(W);return n.loading=!0,n;case P.x:var a=Z(e);return a.loading=!1,a.endType=t.endType,a;case P.w:var r=Z(e);return r.conflictMessage=t.conflictMessage,r.loading=!1,r;default:return e}},ee={editing:!1,loading:!1,errorMessage:null};function te(e){return JSON.parse(JSON.stringify(e))}var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.l:var n=te(ee);return n.editing=!0,n;case P.p:var a=te(e);return a.loading=!0,a;case P.o:var r=te(e);return r.errorMessage=t.errorMessage,r.loading=!1,r;case P.n:var c=te(e);return c.loading=!1,c;case P.k:var o=te(e);return o.editing=!1,o;default:return e}},ae=n(43),re=M.d,ce=Object(M.c)({buildBurger:x,placeOrder:H,fetchOrders:q,login:V,signup:$,updateProfile:ne}),oe=Object(M.e)(ce,re(Object(M.a)(ae.a))),ie=r.a.createElement(m.a,{store:oe},r.a.createElement(s.a,{basename:"/burgerbuilder"},r.a.createElement(L,null)));o.a.render(r.a.createElement(r.a.Fragment,null,ie),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[46,2,3]]]);
//# sourceMappingURL=main.669ef75e.chunk.js.map