(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],[,function(e,t,n){"use strict";n.d(t,"r",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"q",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"o",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"n",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return p})),n.d(t,"m",(function(){return v})),n.d(t,"l",(function(){return E})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return h})),n.d(t,"k",(function(){return O})),n.d(t,"u",(function(){return y})),n.d(t,"t",(function(){return N})),n.d(t,"s",(function(){return S}));var r="SET_INGREDIENTS",a="FETCH_INGREDIENTS_FAILED",c="ADD_INGREDIENT",o="REMOVE_INGREDIENT",i="CHECKOUT_BURGER",u="PURCHASE_BURGER_START",l="PURCHASE_BURGER_SUCCESS",s="PURCHASE_BURGER_FAIL",d="FETCH_ORDERS_START",m="FETCH_ORDER_SUCCESS",f="FETCH_ORDER_FAIL",g="LOGIN_START",p="LOGIN_STORE",v="PROFILE_STORE",E="PROFILE_FAIL",b="LOGIN_FAIL",h="LOGIN_END",O="LOGOUT",y="SIGNUP_START",N="SIGNUP_END",S="SIGNUP_CONFLICT"},,,,,,,,,function(e,t,n){"use strict";var r=n(16),a=n.n(r).a.create({baseURL:"https://react-burger-builder-12ae6.firebaseio.com"});t.a=a},,,,function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"i",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"b",(function(){return E})),n.d(t,"j",(function(){return O}));var r=n(1),a=n(10),c=function(e){return{type:r.a,ingredient:e}},o=function(e){return{type:r.q,ingredient:e}},i=function(){return function(e){return a.a.get("/ingredients.json").then((function(t){var n;e((n=t.data,{type:r.r,ingredients:n}))})).catch((function(t){e({type:r.c})}))}},u=function(){return{type:r.b}},l=function(e,t){return function(n){n({type:r.o}),a.a.post("/orders.json?auth="+t,e).then((function(e){n({type:r.p})})).catch((function(e){n(function(e){return{type:r.n,error:e}}(e))}))}},s=n(5),d=function(e,t){return function(n){n({type:r.e});var c="?auth=".concat(e,'&orderBy="userId"&equalTo="').concat(t,'"');a.a.get("/orders.json".concat(c)).then((function(e){var t,a=[];for(var c in e.data)a.unshift(Object(s.a)(Object(s.a)({},e.data[c]),{},{id:c}));n((t=a,{type:r.f,orders:t}))})).catch((function(e){var t;n((t=e,{type:r.d,error:t}))}))}},m=n(16),f=n.n(m),g=function(e,t){return{type:r.j,idToken:e,userId:t}},p=function(e){return function(t){setTimeout((function(){t(v())}),900*e)}},v=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:r.k}},E=function(){return function(e){var t=localStorage.getItem("token");if(t){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)e(v());else{var r=localStorage.getItem("userId"),a=(n.getTime()-(new Date).getTime())/1e3;e(g(t,r)),e(p(a))}}else e(v())}},b=function(e,t){return function(n){n({type:r.i});var c="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");f.a.post(c,Object(s.a)(Object(s.a)({},e),{},{returnSecureToken:!0})).then((function(e){var c=new Date((new Date).getTime()+new Date(1e3*e.data.expiresIn).getTime()),o=e.data.localId,i=e.data.idToken,u=e.data.expiresIn;localStorage.setItem("token",i),localStorage.setItem("expirationDate",c),localStorage.setItem("userId",o),n(g(i,o)),n(p(u)),function(e,t){var n="?auth=".concat(e,'2&orderBy="userId"&equalTo="').concat(t,'"');return a.a.get("/users.json".concat(n))}(i,o).then((function(e){var t={};for(var a in e.data)Object.assign(t,e.data[a]);n(function(e){return{type:r.m,userData:e}}(t))})).catch((function(){var e;n((e={message:"Network Error! Failed to login"},{type:r.l,error:e})),t(!0)}))}),(function(e){console.log("error handler2"),n(function(e){return{type:r.h,error:e}}(e.response.data.error))}))}},h=function(e){return{type:r.t,endType:e}},O=function(e,t){var n=e.email,c=e.password,o=e.name,i=e.country,u=e.zipCode,l=e.contactNumber,d=null,m={email:n,password:c},g={name:o,country:i,zipCode:u,contactNumber:l};return function(e){e({type:r.u}),function(e){var t="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");return f.a.post(t,Object(s.a)(Object(s.a)({},e),{},{returnSecureToken:!0}))}(m).then((function(n){console.log(n);var r=n.data.idToken,c=n.data.localId;d=r,function(e,t){var n="?auth=".concat(t);return a.a.post("/users.json".concat(n),e)}(Object(s.a)(Object(s.a)({},g),{},{userId:c}),r).then((function(){e(h("userSaved")),t(!0)}),(function(n){console.log(n.response.data.error),function(e){var t="https://identitytoolkit.googleapis.com/v1/accounts:delete?key=".concat("AIzaSyB9KjbBy3MryQYOKkZDjOXiYzScBLApRFE");return f.a.post(t,{idToken:e})}(d).then((function(){e(h("signupFailed")),t(!0)}),(function(){e(h("userNotSaved")),t(!0)}))}))}),(function(t){e(function(e){return{type:r.s,error:e}}(t.response.data.error))}))}}},function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(90);t.a=function(){return a.a.createElement("div",{className:"spinner"},a.a.createElement("div",null),a.a.createElement("div",null))}},,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=(n(89),n(25));t.a=function(e){var t=e.closeAlert;return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,{clicked:t}),a.a.createElement("div",{className:"alert"},e.children))}},,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(66);t.a=function(e){var t=e.clicked;return a.a.createElement("div",{className:"backdrop",onClick:t})}},function(e,t,n){},,,,,function(e,t,n){"use strict";var r=n(12),a=n(0);t.a=function(e){var t=Object(a.useState)(e),n=Object(r.a)(t,2);return[n[0],n[1]]}},,function(e,t,n){"use strict";var r=n(12),a=n(0),c=n.n(a),o=n(21);t.a=function(e,t){return function(n){var i=function(e){var t=Object(a.useState)(null),n=Object(r.a)(t,2),c=n[0],o=n[1],i=e.interceptors.request.use((function(e){return o(null),e})),u=e.interceptors.response.use((function(e){return e}),(function(e){o(e)}));Object(a.useEffect)((function(){return function(){e.interceptors.request.eject(i),e.interceptors.response.eject(u)}}),[i,u]);return[c,function(){o(null)}]}(t),u=Object(r.a)(i,2),l=u[0],s=u[1];return c.a.createElement(c.a.Fragment,null,l?c.a.createElement(o.a,{closeAlert:s},l.message):null,c.a.createElement(e,n))}}},,,,,,,,,,,function(e,t,n){"use strict";var r=n(43),a=n(0),c=n.n(a),o=(n(67),n(68),n(69),function(e){var t=null;switch(e.type){case"bread-bottom":t=c.a.createElement("div",{className:"bread-bottom"});break;case"bread-top":t=c.a.createElement("div",{className:"bread-top"},c.a.createElement("div",{className:"seeds1"}),c.a.createElement("div",{className:"seeds2"}));break;case"meat":t=c.a.createElement("div",{className:"meat"});break;case"cheese":t=c.a.createElement("div",{className:"cheese"});break;case"bacon":t=c.a.createElement("div",{className:"bacon"});break;case"salad":t=c.a.createElement("div",{className:"salad"});break;default:t=null}return t});t.a=function(e){var t=Object.keys(e.ingredients).map((function(t){return Object(r.a)(Array(e.ingredients[t])).map((function(e,n){return c.a.createElement(o,{key:t+n,type:t})}))})).reduce((function(e,t){return e.concat(t)}),[]);return 0===t.length&&(t=c.a.createElement("p",{className:"burger__instruction"},"FEEL FREE TO ADD INGREDIENTS")),c.a.createElement("div",{className:"burger scrollbar"},c.a.createElement(o,{type:"bread-top"}),t,c.a.createElement(o,{type:"bread-bottom"}))}},,function(e,t){},,,function(e,t,n){e.exports=n(92)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),o=n.n(c),i=(n(54),n(12)),u=(n(55),n(56),n(57),function(e){return a.a.createElement("div",{className:"logo"})}),l=(n(58),n(59),n(13)),s=n(4),d=function(e){var t=e.closeSideDrawer,n=null!==Object(s.d)((function(e){return e.login.idToken}));return a.a.createElement("ul",{className:"navigation-items",onClick:t},a.a.createElement("li",{className:"navigation-item"},a.a.createElement(l.c,{to:"/",exact:!0,className:"link--nav",activeClassName:"active"},"Burger Builder")),n?a.a.createElement("li",{className:"navigation-item"},a.a.createElement(l.c,{to:"/profile",exact:!0,className:"link--nav",activeClassName:"active"},"Profile")):null,n?a.a.createElement("li",{className:"navigation-item"},a.a.createElement(l.c,{to:"/orders",exact:!0,className:"link--nav",activeClassName:"active"},"Orders")):null,a.a.createElement("li",{className:"navigation-item"},a.a.createElement(l.c,{to:n?"/logout":"/login",exact:!0,className:"link--nav",activeClassName:"active"},n?"Logout":"Login")))},m=(n(64),function(e){var t=e.toggleSideDrawer;return a.a.createElement("div",{onClick:t,className:"drawertoggle"},a.a.createElement("div",{className:"drawertoggle__bar"}),a.a.createElement("div",{className:"drawertoggle__bar"}),a.a.createElement("div",{className:"drawertoggle__bar"}))}),f=function(e){var t=e.toggleSideDrawer;return a.a.createElement("div",{className:"toolbar"},a.a.createElement(m,{toggleSideDrawer:t}),a.a.createElement(u,null),a.a.createElement("nav",{className:"toolbar__nav"},a.a.createElement(d,null)))},g=(n(65),n(25)),p=function(e){var t=e.sideDrawerOpen,n=e.closeSideDrawer,r=e.isAuthenticated;return a.a.createElement(a.a.Fragment,null,t?a.a.createElement(g.a,{clicked:n}):null,a.a.createElement("div",{className:t?"sidedrawer--open":"sidedrawer--close"},a.a.createElement("nav",null,a.a.createElement(d,{side:!0,isAuthenticated:r,closeSideDrawer:n}))))},v=function(e){var t=e.children,n=Object(s.d)((function(e){return null!==e.login.idToken})),c=Object(r.useState)(!1),o=Object(i.a)(c,2),u=o[0],l=o[1];return a.a.createElement("div",{className:"app"},a.a.createElement(f,{toggleSideDrawer:function(){l(!u)},isAuthenticated:n}),a.a.createElement(p,{isAuthenticated:n,sideDrawerOpen:u,closeSideDrawer:function(){l(!1)}}),a.a.createElement("main",{className:"main"},t))},E=n(5),b=n(44),h=n(10),O=(n(26),n(87),n(88),function(e){var t=e.label,n=e.removeIngredient,r=e.disabled,c=e.addIngredient;return a.a.createElement("div",{className:"build-control"},a.a.createElement("div",{className:"build-control__label"},t),a.a.createElement("button",{className:"button--less build-control__button",onClick:n,disabled:r},"Less"),a.a.createElement("button",{className:"button--more build-control__button",onClick:c},"More"))}),y=[{label:"Salad",type:"salad"},{label:"Bacon",type:"bacon"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],N=function(e){var t=e.startOrder,n=e.disabled,r=e.price,c=e.addIngredient,o=e.removeIngredient,i=Object(E.a)({},n),u=!Object.keys(i).map((function(e){return!i[e]})).reduce((function(e,t){return e||t}),!1);return a.a.createElement("div",{className:"build-controls"},a.a.createElement("p",{className:"build-controls__price"},"Current price: ",a.a.createElement("span",null,"$",r.toFixed(2))),y.map((function(e){return a.a.createElement(O,{key:e.label,label:e.label,addIngredient:function(){return c(e.type)},removeIngredient:function(){return o(e.type)},disabled:n[e.type]})})),a.a.createElement("button",{className:"button--success build-controls__order",disabled:u,onClick:t},"Order now!"))},S=n(21),k=n(15),I=(n(91),function(e){var t=e.cancelOrder,n=e.goToLogin;return a.a.createElement("div",{className:"order-prompt"},a.a.createElement("p",{className:"order-prompt__toolkit"},"Please login to continue"),a.a.createElement("button",{type:"button",className:"button--failed order-prompt__button",onClick:t},"Cancel"),a.a.createElement("button",{type:"button",className:"button--success order-prompt__button",onClick:n},"Login"))}),j=n(33),_=n(31),T=n(14),w=Object(j.a)((function(e){var t=Object(s.c)(),n=Object(_.a)(!1),c=Object(i.a)(n,2),o=c[0],u=c[1],l=Object(s.d)((function(e){return e.buildBurger.ingredients})),d=Object(s.d)((function(e){return e.buildBurger.totalPrice})),m=Object(s.d)((function(e){return e.buildBurger.error})),f=Object(s.d)((function(e){return null!==e.login.idToken}));Object(r.useEffect)((function(){t(T.e())}),[]);var g=function(){return u(!1)},p=Object(E.a)({},l);for(var v in p)p[v]=p[v]<=0;return a.a.createElement(a.a.Fragment,null,o?a.a.createElement(S.a,{closeAlert:g},a.a.createElement(I,{cancelOrder:g,goToLogin:function(){e.history.push("/login"),u(!1)}})):null,l&&a.a.createElement(a.a.Fragment,null,a.a.createElement(b.a,{ingredients:l}),a.a.createElement(N,{addIngredient:function(e){return t(T.a(e))},removeIngredient:function(e){return t(T.i(e))},disabled:p,price:d,startOrder:function(){return f&&e.history.push("/checkout")||u(!0)}}))||m&&a.a.createElement("p",null,"Ingredients can't be loaded :(")||a.a.createElement(k.a,null))}),h.a),D=n(3),R=function(e){var t=Object(s.c)();return Object(r.useEffect)((function(){t(T.g())}),[]),a.a.createElement(D.a,{to:"/"})},C=a.a.lazy((function(){return n.e(6).then(n.bind(null,158))})),A=a.a.lazy((function(){return n.e(8).then(n.bind(null,159))})),F=a.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,155))})),B=a.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,156))})),L=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,157))})),P=function(e){var t=Object(s.c)(),n=Object(s.d)((function(e){return e.login.idToken}));t(T.b(n));var c=null!==n;return a.a.createElement(v,null,a.a.createElement(D.d,null,function(e){return e?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(D.b,{path:"/checkout",component:C})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(D.b,{path:"/orders",component:A})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(D.b,{path:"/profile",component:L})),a.a.createElement(D.b,{path:"/logout",component:R}),a.a.createElement(D.b,{path:"/",exact:!0,component:w}),a.a.createElement(D.a,{to:"/"})):a.a.createElement(a.a.Fragment,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(D.b,{path:"/login",component:F})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(k.a,null)},a.a.createElement(D.b,{path:"/signup",component:B})),a.a.createElement(D.b,{path:"/",exact:!0,component:w}),a.a.createElement(D.a,{to:"/"}))}(c)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(17),G=n(1),x={ingredients:null,totalPrice:4,error:!1},z={salad:.5,cheese:.4,meat:1.3,bacon:.7};function J(e){return JSON.parse(JSON.stringify(e))}var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.r:var n=J(e);return n.ingredients?(n.error=!1,n):(n.ingredients={salad:t.ingredients.salad,bacon:t.ingredients.bacon,cheese:t.ingredients.cheese,meat:t.ingredients.meat},n.error=!1,n.purchasing=!1,n);case G.c:var r=J(e);return r.error=!0,r;case G.a:var a=J(e);return a.ingredients[t.ingredient]++,a.totalPrice+=z[t.ingredient],a;case G.q:var c=J(e);return c.ingredients[t.ingredient]--,c.totalPrice-=z[t.ingredient],c;default:return e}},q={loading:!1,purchased:!1};function K(e){return JSON.parse(JSON.stringify(e))}var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.b:var n=K(q);return n;case G.p:var r=K(e);return r.loading=!1,r.purchased=!0,r;case G.n:var a=K(e);return a.loading=!1,a;case G.o:var c=K(e);return c.loading=!0,c;default:return e}},Y={orders:[],fetching:!0};function Q(e){return JSON.parse(JSON.stringify(e))}var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.e:var n=Q(Y);return n.fetching=!0,n;case G.f:var r=Q(e);return r.orders=t.orders,r.fetching=!0,r;case G.d:var a=Q(e);return a.fetching=!0,a;default:return e}},X={idToken:null,userId:null,userData:{},loginError:null,getUserError:null,loading:!1};function Z(e){return JSON.parse(JSON.stringify(e))}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.i:var n=Z(X);return n.loading=!0,n;case G.j:var r=Z(e);return r.idToken=t.idToken,r.userId=t.userId,r;case G.m:var a=Z(e);return a.userData=t.userData,a;case G.l:var c=Z(e);return c.getUserError=t.error,c.loading=!1,c;case G.h:var o=Z(e);return o.loginError=t.error,o.loading=!1,o;case G.g:var i=Z(e);return i.loading=!1,i;case G.k:var u=Z(e);return u.idToken=null,u.userId=null,u;default:return e}},V={error:null,loading:!1,endType:""};function ee(e){return JSON.parse(JSON.stringify(e))}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.u:var n=ee(V);return n.loading=!0,n;case G.t:var r=ee(e);return r.loading=!1,r.endType=t.endType,r;case G.s:var a=ee(e);return a.error=t.error,a.loading=!1,a;default:return e}},ne=n(46),re=n.n(ne),ae=n(47),ce=U.d,oe=Object(U.c)({buildBurger:H,placeOrder:M,fetchOrders:W,login:$,signup:te,editProfile:re.a}),ie=Object(U.e)(oe,ce(Object(U.a)(ae.a))),ue=a.a.createElement(s.a,{store:ie},a.a.createElement(l.a,{basename:"/burgerbuilder"},a.a.createElement(P,null)));o.a.render(a.a.createElement(a.a.Fragment,null,ue),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[49,2,3]]]);
//# sourceMappingURL=main.e3ea5fdf.chunk.js.map