{"version":3,"sources":["recycle/Prompt/Prompt.js","containers/Checkout/Checkout.js"],"names":["Prompt","props","children","acknowledgeAlert","className","type","onClick","Checkout","dispatch","useDispatch","useAlert","alertShown","showAlert","burgerItems","ingredients","useSelector","state","buildBurger","totalPrice","toFixed","userData","login","idToken","userId","checkOutMessage","placeOrder","loading","orderData","test","history","replace","ingredient","push","key","style","color","marginBottom","length","zipCode","country","name","contactNumber","date","Date","actions","purchaseDate","closeAlert"],"mappings":"wGAAA,2BAYeA,IATA,SAAAC,GAAU,IACdC,EAA6BD,EAA7BC,SAASC,EAAoBF,EAApBE,iBAChB,OACI,yBAAKC,UAAU,gBACX,uBAAGA,UAAU,yBAAyBF,GACtC,4BAAQG,KAAK,SAASD,UAAU,uCAAuCE,QAASH,GAAhF,S,8LCwGGI,UAjGE,SAAAN,GAEb,IAAMO,EAAWC,cAFK,EAGUC,aAAS,GAHnB,mBAGfC,EAHe,KAGHC,EAHG,KAMhBC,EAAc,GACdC,EAAcC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,YAAYH,eACrDI,EAAaH,aAAY,SAAAC,GAAK,OAAIA,EAAMC,YAAYC,WAAWC,QAAQ,MACvEC,EAAWL,aAAY,SAAAC,GAAK,OAAIA,EAAMK,MAAMD,YAC5CE,EAAUP,aAAY,SAAAC,GAAK,OAAIA,EAAMK,MAAMC,WAC3CC,EAASR,aAAY,SAAAC,GAAK,OAAIA,EAAMK,MAAME,UAC1CC,EAAkBT,aAAY,SAAAC,GAAK,OAAIA,EAAMS,WAAWD,mBACxDE,EAAUX,aAAY,SAAAC,GAAK,OAAIA,EAAMS,WAAWC,WAEhDC,EAAY,CACdb,cACAI,aACAK,UAKEpB,EAAmB,WAElB,aAAayB,KAAKJ,IACjBvB,EAAM4B,QAAQC,QAAQ,KACtBlB,GAAU,IAEVA,GAAU,IAgBlB,IAAK,IAAMmB,KAAcjB,EACjBA,EAAYiB,GAAc,GAC1BlB,EAAYmB,KACR,wBAAI5B,UAAS,mDAA8C2B,GAAcE,IAAKF,GAC1E,8BAAOA,EAAP,OAA6BjB,EAAYiB,KAKzD,OACI,oCACKL,EACG,6BACI,uBAAGQ,MAAO,CAACC,MAAM,QAAQC,aAAa,SAAtC,yBACA,kBAAC,IAAD,OAGR,oCACI,kBAAC,IAAD,CAAQtB,YAAaA,IACrB,6BAASV,UAAU,iBACf,wBAAIA,UAAU,0BAAd,iBACA,wBAAIA,UAAU,wBACV,8BAAOS,EAAYwB,OAAS,EAAI,cAAgB,cAC/CxB,GAEL,uBAAGT,UAAU,wBACT,gDADJ,IACiCc,GAEjC,6BAASd,UAAU,0BACf,4CADJ,UAC+BgB,EAASkB,QADxC,YACmDlB,EAASmB,SAAU,6BAClE,6CAAyBnB,EAASoB,KAAK,6BACvC,4CAAwBpB,EAASqB,eAGrC,6BACI,4BAAQpC,KAAK,SAASD,UAAU,qCAAqCE,QAvClE,WACnBL,EAAM4B,QAAQC,QAAQ,OAsCN,QACA,4BAAQzB,KAAK,SAASD,UAAU,wCAAwCE,QA9C3E,WACb,IAAMoC,EAAO,IAAIC,KAEjBnC,EAASoC,IAAA,2BAA2BjB,GAA3B,IAAqCkB,aAAaH,IAAMpB,EAAQV,MA2CzD,eAMVD,EACE,kBAAC,IAAD,CAAOmC,WAAY3C,GACf,kBAAC,IAAD,CAAgBA,iBAAkBA,GAAmBqB,IAF9C","file":"static/js/8.03680b18.chunk.js","sourcesContent":["import React from 'react';\r\nimport './prompt.scss'\r\n\r\nconst Prompt = props => {\r\n    const {children,acknowledgeAlert} = props \r\n    return (\r\n        <div className='error-prompt'>\r\n            <p className='error-prompt__toolkit'>{children}</p>\r\n            <button type=\"button\" className='button--success error-prompt__button' onClick={acknowledgeAlert}>OK</button>\r\n        </div>\r\n    )\r\n}\r\nexport default Prompt;\r\n\r\n","import './order-summary.scss'\r\nimport '../../recycle/Button/button.scss';\r\n\r\nimport React from 'react';\r\nimport Burger from '../Burger/Burger';\r\nimport { useSelector } from 'react-redux';\r\nimport Alert from '../../recycle/Alert/Alert';\r\nimport useAlert from '../../hooks/useAlert';\r\nimport CheckoutPrompt from '../../recycle/Prompt/Prompt';\r\nimport * as actions from '../../store/actions/exports';\r\nimport Spinner from '../../recycle/Spinner/Spinner';\r\n\r\nimport {useDispatch} from 'react-redux';\r\n\r\n\r\nconst Checkout = props => {\r\n\r\n    const dispatch = useDispatch();\r\n    const [alertShown, showAlert] = useAlert(false);\r\n\r\n    \r\n    const burgerItems = [];\r\n    const ingredients = useSelector(state => state.buildBurger.ingredients);\r\n    const totalPrice = useSelector(state => state.buildBurger.totalPrice.toFixed(2));\r\n    const userData = useSelector(state => state.login.userData);\r\n    const idToken = useSelector(state => state.login.idToken)\r\n    const userId = useSelector(state => state.login.userId)\r\n    const checkOutMessage = useSelector(state => state.placeOrder.checkOutMessage)\r\n    const loading = useSelector(state => state.placeOrder.loading)\r\n\r\n    const orderData = {\r\n        ingredients,\r\n        totalPrice,\r\n        userId,\r\n    }\r\n\r\n\r\n\r\n    const acknowledgeAlert = () => {\r\n        \r\n        if(/[Tt]hank.*/.test(checkOutMessage)){\r\n            props.history.replace('/')\r\n            showAlert(false);\r\n        } else {\r\n            showAlert(false)\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    const purchase = () => {\r\n        const date = new Date()\r\n        // const purchaseDate = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`\r\n        dispatch(actions.purchaseBurger({...orderData,purchaseDate:date},idToken,showAlert))\r\n    }\r\n\r\n    const cancelPurchase = () => {\r\n        props.history.replace('/')\r\n    }\r\n\r\n    for (const ingredient in ingredients) {\r\n        if (ingredients[ingredient] > 0)\r\n            burgerItems.push(\r\n                <li className={`order-summary__item order-summary__item--${ingredient}`} key={ingredient}>\r\n                    <span>{ingredient} : </span>{ingredients[ingredient]}\r\n                </li>\r\n            )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading? (\r\n                <div>\r\n                    <p style={{color:'wheat',marginBottom:'1rem'}}>Placing your order...</p>\r\n                    <Spinner/>\r\n                </div>\r\n            ):\r\n            <>\r\n                <Burger ingredients={ingredients} />\r\n                <section className=\"order-summary\">\r\n                    <h3 className=\"order-summary__heading\">Order Summary</h3>\r\n                    <ul className=\"order-summary__items\">\r\n                        <span>{burgerItems.length > 1 ? 'Ingredients' : 'Ingredient'}</span>\r\n                        {burgerItems}\r\n                    </ul>\r\n                    <p className=\"order-summary__price\">\r\n                        <span>Total Price : </span>${totalPrice}\r\n                    </p>\r\n                    <address className=\"order-summary__address\">\r\n                        <span>Ship to : </span>{`${userData.zipCode} ${userData.country}`}<br />\r\n                        <span>Receiver : </span>{userData.name}<br />\r\n                        <span>Contact : </span>{userData.contactNumber}\r\n                    </address>\r\n\r\n                    <nav>\r\n                        <button type=\"button\" className=\"button--more order-summary__button\" onClick={cancelPurchase}>Back</button>\r\n                        <button type=\"button\" className=\"button--success order-summary__button\" onClick={purchase}>Purchase</button>\r\n                    </nav>\r\n                </section>\r\n            </>\r\n            }\r\n\r\n            {!alertShown ? null :\r\n                <Alert closeAlert={acknowledgeAlert}>\r\n                    <CheckoutPrompt acknowledgeAlert={acknowledgeAlert}>{checkOutMessage}</CheckoutPrompt>\r\n                </Alert>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default Checkout;"],"sourceRoot":""}