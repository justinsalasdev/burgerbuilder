{"version":3,"sources":["recycle/Prompt/Prompt.js","recycle/FormInput/FormInput.js","containers/Login/Login.js"],"names":["Prompt","props","children","acknowledgeAlert","className","type","onClick","FormInput","React","forwardRef","ref","identity","formik","htmlFor","name","isTouched","touched","inputError","errors","getInputError","getFieldProps","Login","useAlert","alertShown","showAlert","dispatch","useDispatch","loading","useSelector","state","login","conflictMessage","errorMessage","inputRef","useRef","useEffect","current","focus","useFormik","initialValues","email","password","validationSchema","Yup","required","max","min","onSubmit","loginData","actions","formToolkit","replace","submitDisabled","Object","keys","length","style","color","marginBottom","handleSubmit","editing","disabled","to","closeAlert"],"mappings":"wGAAA,2BAYeA,IATA,SAAAC,GAAU,IACdC,EAA6BD,EAA7BC,SAASC,EAAoBF,EAApBE,iBAChB,OACI,yBAAKC,UAAU,gBACX,uBAAGA,UAAU,yBAAyBF,GACtC,4BAAQG,KAAK,SAASD,UAAU,uCAAuCE,QAASH,GAAhF,S,uDCRZ,0BAGMI,EAAYC,IAAMC,YAAW,SAACR,EAAMS,GAAS,IAEzCC,EAIFV,EAJEU,SACFN,EAGAJ,EAHAI,KACAO,EAEAX,EAFAW,OACAV,EACAD,EADAC,SASJ,OACI,yBAAKE,UAAU,cACX,2BAAOA,UAAU,oBAAoBS,QAASF,GAAWT,EAAzD,IARc,SAAAY,GAClB,IAAMC,EAAYH,EAAOI,QAAQF,GAC3BG,EAAaL,EAAOM,OAAOJ,GACjC,OAASC,GAAaE,GAAc,0BAAMb,UAAU,uBAAuBa,IAAwB,KAK3BE,CAAcR,IAClF,yCACID,IAAKA,EACLL,KAAMA,EACND,UAAU,oBACVU,KAAMH,GAAcC,EAAOQ,cAAcT,SAO1CJ,O,2KCgEAc,UA/ED,SAAApB,GAAU,IAAD,EAEUqB,aAAS,GAFnB,mBAEdC,EAFc,KAEHC,EAFG,KAGfC,EAAWC,cACXC,EAAUC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,MAAMH,WAC3CI,EAAkBH,aAAY,SAAAC,GAAK,OAAIA,EAAMC,MAAMC,mBACnDC,EAAeJ,aAAY,SAAAC,GAAK,OAAIA,EAAMC,MAAME,gBAIhDC,EAAWC,mBACjBC,qBAAU,WACRF,EAASG,QAAQC,UACjB,IAEF,IAAMlC,EAAmB,WACvBqB,GAAU,IAGNZ,EAAS0B,YAAW,CACxBC,cAAe,CACbC,MAAO,GACPC,SAAU,IAEZC,iBAAkBC,IAAY,CAC5BH,MAAOG,MACJH,MAAO,cACPI,SAAU,eACVC,IAAI,GAAG,yCACVJ,SAAUE,MACPC,SAAU,eACVE,IAAK,EAAG,kCAGbC,SAAU,SAAAC,GACRvB,EAASwB,IAAcD,EAAUxB,OAI/B0B,EACHnB,GAAmB,uBAAG3B,UAAU,eAAe2B,EAAgBoB,QAAQ,KAAK,KAAO,QAAe,KAE/FC,GAAkBC,OAAOC,KAAK1C,EAAOM,QAAQqC,QAAU,EAE7D,OACE,oCACE,yBAAKnD,UAAU,QAEZ8C,EAEAvB,EACC,6BACE,uBAAG6B,MAAO,CAACC,MAAM,QAAQC,aAAa,SAAtC,iBACA,kBAAC,IAAD,OAIJ,0BAAMtD,UAAU,aAAa2C,SAAUnC,EAAO+C,cAC5C,kBAAC,IAAD,CAAWC,SAAS,EAAMhD,OAAQA,EAAQD,SAAS,QAAQN,KAAK,QAAQK,IAAKuB,GAA7E,SACA,kBAAC,IAAD,CAAW2B,SAAS,EAAMhD,OAAQA,EAAQD,SAAS,WAAWN,KAAK,YAAnE,YAEA,4BAAQwD,SAAUT,EAAgB/C,KAAK,SAASD,UAAU,gCAA1D,WAGDuB,EAAS,KACR,kBAAC,IAAD,CAAMvB,UAAU,WAAW0D,GAAG,WAA9B,mBAGFvC,EACA,kBAAC,IAAD,CAAOwC,WAAY5D,GACf,kBAAC,IAAD,CAAaA,iBAAkBA,GAAmB6B,IAF3C,Q","file":"static/js/6.f1c27bfc.chunk.js","sourcesContent":["import React from 'react';\r\nimport './prompt.scss'\r\n\r\nconst Prompt = props => {\r\n    const {children,acknowledgeAlert} = props \r\n    return (\r\n        <div className='error-prompt'>\r\n            <p className='error-prompt__toolkit'>{children}</p>\r\n            <button type=\"button\" className='button--success error-prompt__button' onClick={acknowledgeAlert}>OK</button>\r\n        </div>\r\n    )\r\n}\r\nexport default Prompt;\r\n\r\n","import './form-input.scss';\r\nimport React from 'react';\r\n        \r\nconst FormInput = React.forwardRef((props,ref) => {\r\n\r\n    const{identity,\r\n        type,\r\n        formik,\r\n        children,\r\n    } = props;\r\n    \r\n    const getInputError = name =>{\r\n        const isTouched = formik.touched[name];\r\n        const inputError = formik.errors[name];\r\n        return ( isTouched && inputError && <span className='form-input__toolkit'>{inputError}</span> ) || null;\r\n      }\r\n\r\n    return (\r\n        <div className='form-input'>\r\n            <label className='form-input__label' htmlFor={identity}>{children} {getInputError(identity)}</label>\r\n            <input \r\n                ref={ref}\r\n                type={type}\r\n                className='form-input__field' \r\n                name={identity} {...formik.getFieldProps(identity)} \r\n            />\r\n        </div>\r\n    )\r\n})\r\n        \r\n        \r\nexport default FormInput ;\r\n\r\n        ","import React, {useEffect, useRef} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport * as actions from '../../store/actions/exports';\r\nimport '../../recycle/FormInput/form-input.scss';\r\nimport '../../recycle/Button/button.scss'\r\nimport '../../recycle/Form/form.scss'\r\nimport Spinner from '../../recycle/Spinner/Spinner';\r\nimport FormInput from '../../recycle/FormInput/FormInput';\r\nimport Alert from '../../recycle/Alert/Alert';\r\nimport useAlert from '../../hooks/useAlert';\r\nimport ErrorPrompt from '../../recycle/Prompt/Prompt';\r\n\r\nimport {useFormik} from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nconst Login = props => {\r\n\r\n  const [alertShown,showAlert] = useAlert(false);  \r\n  const dispatch = useDispatch();\r\n  const loading = useSelector(state => state.login.loading);\r\n  const conflictMessage = useSelector(state => state.login.conflictMessage);\r\n  const errorMessage = useSelector(state => state.login.errorMessage);\r\n\r\n  \r\n\r\n  const inputRef = useRef();\r\n  useEffect(() => {\r\n    inputRef.current.focus()\r\n  },[])\r\n\r\n  const acknowledgeAlert = () => {\r\n    showAlert(false)\r\n  }\r\n  \r\n  const formik = useFormik ({\r\n    initialValues: {\r\n      email: '',\r\n      password: '',\r\n    },\r\n    validationSchema: Yup.object ({\r\n      email: Yup.string ()\r\n        .email ('is invalid')\r\n        .required ('is required')\r\n        .max(64,'must not be longer than 20 characters'),\r\n      password: Yup.string ()\r\n        .required ('is required')\r\n        .min (6, 'must be 6 characters atleast')\r\n    }),\r\n\r\n    onSubmit: loginData => {\r\n      dispatch(actions.login(loginData,showAlert))\r\n    }\r\n  });\r\n  \r\n  const formToolkit = (\r\n    (conflictMessage && <p className='form__error'>{conflictMessage.replace(/_/g,' ') + ' :('}</p>) || null\r\n  )\r\n  const submitDisabled = !Object.keys(formik.errors).length <= 0 \r\n\r\n  return (\r\n    <>\r\n      <div className='form'>\r\n      \r\n        {formToolkit}\r\n\r\n        {loading? (\r\n          <div>\r\n            <p style={{color:'wheat',marginBottom:'1rem'}}>Signing in...</p>\r\n            <Spinner/>\r\n          </div>\r\n          \r\n        ): \r\n        <form className='form__form' onSubmit={formik.handleSubmit}>\r\n          <FormInput editing={true} formik={formik} identity='email' type=\"email\" ref={inputRef}>Email</FormInput>\r\n          <FormInput editing={true} formik={formik} identity='password' type=\"password\">Password</FormInput>\r\n\r\n          <button disabled={submitDisabled} type=\"submit\" className=\"button--success form__submit\">Submit</button>\r\n        </form>}\r\n\r\n        {loading? null: \r\n          <Link className='link--to' to='/signup'>Create account</Link>}\r\n      </div>\r\n\r\n      {!alertShown?null:\r\n        <Alert closeAlert={acknowledgeAlert}>\r\n            <ErrorPrompt acknowledgeAlert={acknowledgeAlert}>{errorMessage}</ErrorPrompt>\r\n        </Alert>\r\n      }\r\n    </>\r\n\r\n\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}